"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var data_1 = require("./data/data");
var currencies_1 = require("./data/currencies");
function formatCurrency(data) {
    var _a = data.amount, amount = _a === void 0 ? 0 : _a, country = data.country, _b = data.maximumFractionDigits, maximumFractionDigits = _b === void 0 ? 0 : _b, _c = data.rates, rates = _c === void 0 ? {} : _c;
    var _d = data.from, from = _d === void 0 ? 'USD' : _d, _e = data.to, to = _e === void 0 ? 'USD' : _e;
    if (country)
        to = currencies_1.currencies[country] || 'USD';
    from = from.toUpperCase();
    to = to.toUpperCase();
    if (!data_1.supportedCurrencies.includes(from) ||
        !data_1.supportedCurrencies.includes(to)) {
        return data_1.formattedPrice(from, amount + '');
    }
    if (from === to) {
        return data_1.formattedPrice(from, amount + '');
    }
    if (rates && rates[to]) {
        var convertedAmount = new Intl.NumberFormat("en-US", {
            style: "decimal",
            maximumFractionDigits: maximumFractionDigits,
        }).format(amount * rates[to]);
        console.log(convertedAmount);
        return data_1.formattedPrice(to, convertedAmount);
    }
    return data_1.formattedPrice(from, amount + '');
}
exports.formatCurrency = formatCurrency;
//# sourceMappingURL=formatter.js.map